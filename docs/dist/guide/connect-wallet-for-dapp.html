<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Connect Wallet | BitKeep Docs</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/bitkeep-icon.svg">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <link rel="shortcut icon" href="/bitkeep-icon.svg" color="#3eaf7c">link
    <script src="/js/extend.js"></script>
    <meta name="description" content="Developer documentation for BitKeep Wallet">
    <meta name="theme-color" content="#7524F9">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    <link rel="preload" href="/assets/css/0.styles.9801d373.css" as="style"><link rel="preload" href="/assets/js/app.6330c8a9.js" as="script"><link rel="preload" href="/assets/js/4.83f9d4d7.js" as="script"><link rel="preload" href="/assets/js/10.f240b555.js" as="script"><link rel="preload" href="/assets/js/5.45025c3e.js" as="script"><link rel="prefetch" href="/assets/js/11.176b4a2b.js"><link rel="prefetch" href="/assets/js/12.1038dcb6.js"><link rel="prefetch" href="/assets/js/13.ee30a496.js"><link rel="prefetch" href="/assets/js/14.78161879.js"><link rel="prefetch" href="/assets/js/15.83eec2f0.js"><link rel="prefetch" href="/assets/js/16.1fa3278f.js"><link rel="prefetch" href="/assets/js/17.32b1c1ec.js"><link rel="prefetch" href="/assets/js/18.ca8f5718.js"><link rel="prefetch" href="/assets/js/19.e5d05242.js"><link rel="prefetch" href="/assets/js/20.3dd8aefb.js"><link rel="prefetch" href="/assets/js/21.a076a39b.js"><link rel="prefetch" href="/assets/js/22.7045038d.js"><link rel="prefetch" href="/assets/js/23.570d001f.js"><link rel="prefetch" href="/assets/js/24.e1c52f99.js"><link rel="prefetch" href="/assets/js/25.60a16c69.js"><link rel="prefetch" href="/assets/js/26.e27888b0.js"><link rel="prefetch" href="/assets/js/27.da54d499.js"><link rel="prefetch" href="/assets/js/28.c83c8425.js"><link rel="prefetch" href="/assets/js/29.53d6e738.js"><link rel="prefetch" href="/assets/js/30.10288477.js"><link rel="prefetch" href="/assets/js/6.2c13df09.js"><link rel="prefetch" href="/assets/js/7.33cfd54b.js"><link rel="prefetch" href="/assets/js/8.07369d6c.js"><link rel="prefetch" href="/assets/js/9.f5040c53.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.8f557a18.js"><link rel="prefetch" href="/assets/js/vendors~notification.a9240e72.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9801d373.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/bitkeep-icon.svg" alt="BitKeep Docs" class="logo"> <span class="site-name can-hide">BitKeep Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="https://bitkeep.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Homepage
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/bitkeepwallet/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="https://bitkeep.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Homepage
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/bitkeepwallet/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/" aria-current="page" class="sidebar-link">Introduction</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>DApp Development</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/wallet/introduction.html" class="sidebar-link">introduction</a></li><li><a href="/guide/wallet/quickly.html" class="sidebar-link">Quickly support bitkeep Wallet</a></li><li><a href="/guide/wallet/ethereum.html" class="sidebar-link">Ethereum</a></li><li><a href="/guide/wallet/tron.html" class="sidebar-link">Tron</a></li><li><a href="/guide/wallet/solana.html" class="sidebar-link">solana</a></li><li><a href="/guide/wallet/walletconnet.html" class="sidebar-link">WalletConnect</a></li><li><a href="/guide/wallet/bitkeep.html" class="sidebar-link">bitkeep swap</a></li><li><a href="/guide/wallet/aptos.html" class="sidebar-link">Aptos</a></li><li><a href="/guide/switch-network-for-dapp.html" class="sidebar-link">Switch Network</a></li><li><a href="/guide/webview-function.html" class="sidebar-link">Webview Method(only Mobile)</a></li><li><a href="/guide/faq.html" class="sidebar-link">FAQs</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Resources</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/resources.html" class="sidebar-link">resources</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="connect-wallet"><a href="#connect-wallet" class="header-anchor">#</a> Connect Wallet</h1> <p>Welcome to the developer documentation for BitKeep Wallet. The purpose of this document is to explain how to build a DApp using the BitKeep Wallent.</p> <p>You can find the latest version of BitKeep Wallet on our <a href="https://bitkeep.com" target="_blank" rel="noopener noreferrer">official website<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li><a href="https://bitkeep.com/download?type=1" target="_blank" rel="noopener noreferrer">IOS Download<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://bitkeep.com/download?type=0" target="_blank" rel="noopener noreferrer">Android Download<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://bitkeep.com/download?type=2" target="_blank" rel="noopener noreferrer">Chrome Extension<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h1 id="integrate"><a href="#integrate" class="header-anchor">#</a> Integrate</h1> <p>Once the BitKeep is installed and running (make sure to backup your Secret Recovery Phrase), you should find that the new browser tab <code>window.bitkeep</code> has an available object in the developer console. This is how your website interacts with BikKeep Wallet. This API allows websites to request users' <code>Ethereum Solana Tron...</code> accounts, read data from blockchains the user is connected to, and suggest that the user sign messages and transactions.</p> <p>In order to facilitate special detection, the global object is attached with the <code>isBitKeep</code> <code>bitkeep</code> attribute.</p> <img src="/assets/img/isBitKeep.9f272e10.jpg" width="400px"> <h2 id="quickly-support-bitkeep-wallet"><a href="#quickly-support-bitkeep-wallet" class="header-anchor">#</a> Quickly support bitkeep Wallet</h2> <p>If the Other wallet is already available. <a href="/faq.html#faqs-about-bitkeep-chrome-extension">FAQs about BitKeep Chrome Extension</a></p> <ul><li><code>MetaMask</code></li></ul> <blockquote><p>If the MetaMask Wallet is already available. You can use the <code>window.bitkeep.ethereum</code>  as a  provider, which is the same as <code>window.ethereum</code> || <code>web3.currentProvider</code>.</p></blockquote> <ul><li><code>window.solana</code> | <code>window.phantom</code></li></ul> <blockquote><p>If the solana Wallet is already available. You can use the <code>window.bitkeep.solana</code>  as a  provider, which is the same as <code>window.solana</code> and <code>window.phantom</code>.</p></blockquote> <ul><li><p>Wallet Supported by bitkeep</p> <table><thead><tr><th>BitKeep Global Object</th> <th>support chain</th></tr></thead> <tbody><tr><td>window.bitkeep.ethereum</td> <td>EVM(MetaMask)</td></tr> <tr><td>window.bitkeep.solana</td> <td>Solana</td></tr> <tr><td>window.tronLink</td> <td>Tron</td></tr> <tr><td>window.bitkeep.visionWeb</td> <td>Vsision</td></tr> <tr><td>window.bitkeep.IWalletJS</td> <td>Iost</td></tr> <tr><td>window.bitkeep.arweave</td> <td>Arweave</td></tr></tbody></table></li></ul> <h2 id="ethereum-provider-api-evm"><a href="#ethereum-provider-api-evm" class="header-anchor">#</a> Ethereum Provider API (EVM)</h2> <p>BitKeep injects a global API into websites visited by its users at <code>window?.bitkeep?.ethereum</code>. This API allows websites to request users' Ethereum accounts, read data from blockchains the user is connected to, and suggest that the user sign messages and transactions. The presence of the provider object indicates an Ethereum user.</p> <h3 id="table-of-contents"><a href="#table-of-contents" class="header-anchor">#</a> Table of Contents</h3> <ul><li><a href="#provider">Get Provider</a></li> <li><a href="#basic-usage">Basic Usage</a></li> <li><a href="#chain-ids">Chain IDs</a></li> <li>Methods
<ul><li><a href="#isconnected">isConnected()</a></li> <li><a href="#request-args">request(arg)</a> <ul><li><a href="#eth-requestaccounts">eth_requestAccounts</a></li> <li><a href="#wallet-switchethereumchain-wallet-addethereumchain">wallet_switchEthereumChain/wallet_addEthereumChain</a></li> <li><a href="#sendtransaction-transfer">eth_sendTransaction</a></li> <li><a href="#wallet-watchasset">wallet_watchAsset</a></li> <li><a href="https://metamask.github.io/api-playground/api-documentation" target="_blank" rel="noopener noreferrer">Other API Playground<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></li> <li>Events
<ul><li><a href="#event-listeners">accountsChanged/chainChanged</a></li></ul></li> <li><a href="#signing-data">Signing Data</a></li> <li><a href="#errors">Errors</a></li></ul> <h3 id="basic-usage"><a href="#basic-usage" class="header-anchor">#</a> Basic Usage</h3> <p>For any non-trivial Ethereum web application — a.k.a. dapp, web3 site etc. — to work, you will have to:</p> <ol><li>Detect the Ethereum provider (<code>window?.bitkeep?.ethereum</code>)</li> <li>Detect which Ethereum network the user is connected to</li> <li>Get the user's Ethereum account(s)</li></ol> <p>reviewing the snippet in the <a href="#eth-requestaccounts">eth-requestaccounts</a> to content</p> <p>The provider API is all you need to create a full-featured web3 application.</p> <p>You can refer a third-party base about Web3.0 login to support Bitkeep Wallet quickly, such as: <a href="https://www.npmjs.com/package/bitkeep-web3modal" target="_blank" rel="noopener noreferrer">bitkeep-web3modal<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>[Publishing], <a href="https://github.com/bitkeepwallet/download/tree/example/example/eth/wagmi-bitkeep-react" target="_blank" rel="noopener noreferrer">wagmi-demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>[Publishing].</p> <p>We provide a <a href="https://github.com/bitkeepwallet/example/tree/master/evm-dapp-demo/test-dapp" target="_blank" rel="noopener noreferrer">test-dapp<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://github.com/bitkeepwallet/download/blob/example/example/eth/dapp/index.html" target="_blank" rel="noopener noreferrer">Simple demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. You can also use third-party libraries in conjunction with <code>window.bitkeep.ethereum</code>, <a href="https://www.npmjs.com/package/web3" target="_blank" rel="noopener noreferrer">web3js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://www.npmjs.com/package/ethers" target="_blank" rel="noopener noreferrer">ethers<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>...</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//npm install bitkeep-web3modal  </span>
<span class="token comment">// fork from https://github.com/WalletConnect/web3modal  https://github.com/WalletConnect/web3modal/issues/574</span>
<span class="token keyword">import</span> web3modal <span class="token keyword">from</span> <span class="token string">'bitkeep-web3modal'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> web3Modal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Web3Modal</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">network</span><span class="token operator">:</span> <span class="token string">'mainnet'</span><span class="token punctuation">,</span> <span class="token comment">// optional</span>
  <span class="token literal-property property">cacheProvider</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// optional</span>
  <span class="token literal-property property">providerOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">bitkeep</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword">package</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">walletconnect</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">display</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">logo</span><span class="token operator">:</span> <span class="token string">'data:image/gif;base64,INSERT_BASE64_STRING'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Mobile'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">'Scan qrcode with your mobile wallet'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token keyword">package</span><span class="token operator">:</span> WalletConnectProvider<span class="token punctuation">,</span>
      <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">infuraId</span><span class="token operator">:</span> <span class="token string">'INFURA_ID'</span><span class="token punctuation">,</span> <span class="token comment">// required</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// required</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="detect-if-bitkeep-is-installed"><a href="#detect-if-bitkeep-is-installed" class="header-anchor">#</a> Detect if BitKeep is installed</h3> <p>To verify if the browser is running Bitkeep, copy and paste the code snippet below in the developer console of your web browser:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> isBitKeepInstalled <span class="token operator">=</span> window<span class="token punctuation">.</span>isBitKeep <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token operator">!</span>window<span class="token punctuation">.</span>bitkeep<span class="token punctuation">.</span>ethereum<span class="token punctuation">;</span>
 <span class="token comment">//or</span>
<span class="token keyword">const</span> isBitKeepInstalled <span class="token operator">=</span> window<span class="token punctuation">.</span>bitkeep <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span>bitkeep<span class="token punctuation">.</span>ethereum
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="provider"><a href="#provider" class="header-anchor">#</a> Provider</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> provider <span class="token operator">=</span> window<span class="token punctuation">.</span>bitkeep <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span>bitkeep<span class="token punctuation">.</span>ethereum<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>provider<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'https://bitkeep.com/download?type=2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">throw</span> <span class="token string">&quot;Please go to our official website to download!!&quot;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> provider<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="chain-ids"><a href="#chain-ids" class="header-anchor">#</a> Chain IDs</h3> <p>These are the IDs of the Ethereum chains that BitKeep supports by default. Consult <a href="https://chainlist.org/zh" target="_blank" rel="noopener noreferrer">chainid.network<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>for more.</p> <table><thead><tr><th>Hex</th> <th>Decimal</th> <th>Network</th> <th>Hex</th> <th>Decimal</th> <th>Network</th></tr></thead> <tbody><tr><td>0x1</td> <td>1</td> <td>Ethereum</td> <td>0xa</td> <td>10</td> <td>Optimism</td></tr> <tr><td>0x18</td> <td>24</td> <td>KardiaChain</td> <td>0x19</td> <td>25</td> <td>Cronos</td></tr> <tr><td>0x38</td> <td>56</td> <td>BNB Chain</td> <td>0x39</td> <td>57</td> <td>Syscoin</td></tr> <tr><td>0x3d</td> <td>61</td> <td>Ethereum Classic</td> <td>0x42</td> <td>66</td> <td>OKX Chain</td></tr> <tr><td>0x52</td> <td>82</td> <td>Meter Mainnet</td> <td>0x56</td> <td>86</td> <td>GateChain</td></tr> <tr><td>0x58</td> <td>88</td> <td>TomoChain</td> <td>0x64</td> <td>100</td> <td>Gnosis Chain</td></tr> <tr><td>0x6a</td> <td>106</td> <td>Velas</td> <td>0x73</td> <td>115</td> <td>Lucky Chain</td></tr> <tr><td>0x7a</td> <td>122</td> <td>Fuse</td> <td>0x80</td> <td>128</td> <td>Heco</td></tr> <tr><td>0x89</td> <td>137</td> <td>Polygon</td> <td>0xc7</td> <td>199</td> <td>BitTorrent</td></tr> <tr><td>0xfa</td> <td>250</td> <td>Fantom</td> <td>0x120</td> <td>288</td> <td>Boba Network</td></tr> <tr><td>0x141</td> <td>321</td> <td>KCC</td> <td>0x334</td> <td>820</td> <td>Callisto Mainnet</td></tr> <tr><td>0x3e6</td> <td>998</td> <td>Lucky Network</td> <td>0x500</td> <td>1280</td> <td>HALO</td></tr> <tr><td>0x505</td> <td>1285</td> <td>Moonriver</td> <td>0x71a</td> <td>1818</td> <td>CUBE</td></tr> <tr><td>0x7e3</td> <td>2019</td> <td>ClassZZ</td> <td>0x868</td> <td>2152</td> <td>Findora</td></tr> <tr><td>0x8ae</td> <td>2222</td> <td>Kava</td> <td>0x1251</td> <td>4689</td> <td>IoTeX</td></tr> <tr><td>0x2019</td> <td>8217</td> <td>KLAY</td> <td>0x2710</td> <td>10000</td> <td>smartBCH</td></tr> <tr><td>0x4b82</td> <td>19330</td> <td>TRUE</td> <td>0x4ef4</td> <td>20212</td> <td>ZSC</td></tr> <tr><td>0x7f08</td> <td>32520</td> <td>Bitgert</td> <td>0xa4b1</td> <td>42161</td> <td>Arbitrum</td></tr> <tr><td>0xa4ec</td> <td>42220</td> <td>Celo</td> <td>0xa516</td> <td>42262</td> <td>Oasis Emerald</td></tr> <tr><td>0xa86a</td> <td>43114</td> <td>AVAX-C</td> <td>0x116e2</td> <td>71394</td> <td>Nervos CKB EVM</td></tr> <tr><td>0x335f9</td> <td>210425</td> <td>PlatON</td> <td>0x3e900</td> <td>256256</td> <td>Caduceus</td></tr> <tr><td>0xa3488</td> <td>668808</td> <td>ASM</td> <td>0x4e454152</td> <td>1313161554</td> <td>Aurora</td></tr> <tr><td>0x63564c40</td> <td>1666600000</td> <td>Harmony</td> <td></td> <td></td> <td></td></tr></tbody></table> <h3 id="isconnected"><a href="#isconnected" class="header-anchor">#</a> isConnected()</h3> <blockquote><p>Note that this method has nothing to do with the user's accounts.
You may often encounter the word &quot;connected&quot; in reference to whether a web3 site can access the user's accounts. In the provider interface, however, &quot;connected&quot; and &quot;disconnected&quot; refer to whether the provider can make RPC requests to the current chain.</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> Provider <span class="token operator">=</span> <span class="token function">getProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Provider<span class="token punctuation">.</span><span class="token function">isConnected</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="eth-requestaccounts"><a href="#eth-requestaccounts" class="header-anchor">#</a> eth_requestAccounts</h3> <blockquote><p><strong>EIP-1102</strong></p> <p>This method is specified by <a href="https://eips.ethereum.org/EIPS/eip-1102" target="_blank" rel="noopener noreferrer">EIP-1102<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. It is equivalent to the deprecated <code>bitkeep.ethereum.enable()</code> provider API method.</p> <p>Under the hood, it calls wallet_requestPermissions for the eth_accounts permission. Since eth_accounts is currently the only permission, this method is all you need for now.</p></blockquote> <p><strong>Returns</strong></p> <p><code>string[]</code> - An array of a single, hexadecimal Ethereum address string.</p> <p><strong>Description</strong></p> <p>Requests that the user provides an Ethereum address to be identified by. Returns a Promise that resolves to an array of a single Ethereum address string. If the user denies the request, the Promise will reject with a 4001 error.</p> <p>The request causes a BitKeep popup to appear. You should only request the user's accounts in response to user action, such as a button click. You should always disable the button that caused the request to be dispatched, while the request is still pending.</p> <p>If you can't retrieve the user's account(s), you should encourage the user to initiate an account request.</p> <ul><li><code>eth_accounts</code> <ul><li>Get user</li></ul></li> <li><code>eth_chainId</code> <ul><li>Get chainid(Hex)</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> Provider <span class="token operator">=</span> <span class="token function">getProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  Provider<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'eth_requestAccounts'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>handleAccountsChainChanged<span class="token punctuation">)</span> <span class="token comment">// address or chainId changed</span>
    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">4001</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// EIP-1193 userRejectedRequest error</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Please connect to MetaMask.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//if used injected</span>
<span class="token keyword">const</span> accounts <span class="token operator">=</span> <span class="token keyword">await</span> Provider<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'eth_requestAccounts'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">handleAccountsChainChanged</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// updated address or chainID,refer to accountsChanged/chainChanged(events)</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>address<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> Provider<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'eth_accounts'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [0x1e805A9aB0FB007B4b9D44d598C6404cE292F20D]</span>
<span class="token keyword">const</span> chainId <span class="token operator">=</span> <span class="token keyword">await</span> Provider<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'eth_chainId'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0x1</span>
<span class="token comment">//if used web3</span>
<span class="token keyword">import</span> Web3 <span class="token keyword">from</span> <span class="token string">'web3'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> accounts <span class="token operator">=</span> <span class="token keyword">await</span> Provider<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'eth_requestAccounts'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//  [0x1e805A9aB0FB007B4b9D44d598C6404cE292F20D]</span>
<span class="token keyword">const</span> web3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Web3</span><span class="token punctuation">(</span>Provider<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">handleAccountsChainChanged</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// updated address or chainID, refer to accountsChanged/chainChanged(events)</span>
<span class="token keyword">const</span> accounts <span class="token operator">=</span> <span class="token keyword">await</span> web3<span class="token punctuation">.</span>eth<span class="token punctuation">.</span><span class="token function">getAccounts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [0x1e805A9aB0FB007B4b9D44d598C6404cE292F20D]</span>
<span class="token keyword">const</span> chainId <span class="token operator">=</span> <span class="token keyword">await</span> web3<span class="token punctuation">.</span>eth<span class="token punctuation">.</span><span class="token function">getChainId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0x1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h3 id="request-args"><a href="#request-args" class="header-anchor">#</a> request(args)</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token keyword">const</span> Provider <span class="token operator">=</span> <span class="token function">getProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">interface</span> <span class="token class-name">RequestArguments</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">method</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
    params<span class="token operator">?</span><span class="token operator">:</span> unknown<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> object<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  Provider<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>args<span class="token operator">:</span> RequestArguments<span class="token punctuation">)</span><span class="token operator">:</span> Promise<span class="token operator">&lt;</span>unknown<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="wallet-watchasset"><a href="#wallet-watchasset" class="header-anchor">#</a> wallet_watchAsset</h3> <blockquote><p><strong>EIP-747</strong></p> <p>This method is specified by <a href="https://eips.ethereum.org/EIPS/eip-747" target="_blank" rel="noopener noreferrer">EIP-747<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <p><strong>Parameters</strong></p> <ul><li><code>WatchAssetParams</code> - The metadata of the asset to watch.</li></ul> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code>  <span class="token keyword">interface</span> <span class="token class-name">WatchAssetParams</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">'ERC20'</span><span class="token punctuation">;</span> <span class="token comment">// In the future, other standards will be supported</span>
    options<span class="token operator">:</span> <span class="token punctuation">{</span>
      address<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token comment">// The address of the token contract</span>
      <span class="token string-property property">'symbol'</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token comment">// A ticker symbol or shorthand, up to 11 characters</span>
      decimals<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token comment">// The number of token decimals</span>
      image<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token comment">// A string url of the token logo</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>Returns</strong></p> <p><code>boolean</code> - <code>true</code> if the the token was added, <code>false</code> otherwise</p> <p><strong>Description</strong></p> <p>Requests that the user tracks the token in BitKeep. Returns a boolean indicating if the token was successfully added.</p> <p>Most Ethereum wallets support some set of tokens, usually from a centrally curated registry of tokens. wallet_watchAsset enables web3 application developers to ask their users to track tokens in their wallets, at runtime. Once added, the token is indistinguishable from those added via legacy methods, such as a centralized registry.</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code>  <span class="token keyword">const</span> Provider <span class="token operator">=</span> <span class="token function">getProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Provider
    <span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      method<span class="token operator">:</span> <span class="token string">'wallet_watchAsset'</span><span class="token punctuation">,</span>
      params<span class="token operator">:</span> <span class="token punctuation">{</span>
        type<span class="token operator">:</span> <span class="token string">'ERC20'</span><span class="token punctuation">,</span>
        options<span class="token operator">:</span> <span class="token punctuation">{</span>
          address<span class="token operator">:</span> <span class="token string">'0xb60e8dd61c5d32be8058bb8eb970870f07233155'</span><span class="token punctuation">,</span>
          <span class="token builtin">symbol</span><span class="token operator">:</span> <span class="token string">'FOO'</span><span class="token punctuation">,</span>
          decimals<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
          image<span class="token operator">:</span> <span class="token string">'https://foo.io/token-image.svg'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'FOO successfully added to wallet!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Something went wrong.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token builtin">console</span><span class="token punctuation">.</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="wallet-switchethereumchain-wallet-addethereumchain"><a href="#wallet-switchethereumchain-wallet-addethereumchain" class="header-anchor">#</a> wallet_switchEthereumChain/wallet_addEthereumChain</h3> <ul><li><p><strong>wallet_addEthereumChain</strong></p> <p>Creates a confirmation asking the user to add the specified chain to BitKeep. The user may choose to switch to the chain once it has been added.</p> <p><strong>Parameters:</strong></p> <p>For the rpcUrls and blockExplorerUrls arrays, at least one element is required, and only the first element will be used.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">interface</span> <span class="token class-name">AddEthereumChainParameter</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">chainId</span><span class="token operator">:</span> string<span class="token punctuation">;</span> <span class="token comment">// A 0x-prefixed hexadecimal string</span>
  <span class="token literal-property property">chainName</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
  <span class="token literal-property property">nativeCurrency</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
    <span class="token literal-property property">symbol</span><span class="token operator">:</span> string<span class="token punctuation">,</span> <span class="token comment">// 2-6 characters long</span>
    <span class="token literal-property property">decimals</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token literal-property property">rpcUrls</span><span class="token operator">:</span> string<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  blockExplorerUrls<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  iconUrls<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// Currently ignored.</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>Returns</strong></p> <p>null - The method returns null if the request was successful, and an error otherwise.</p> <p><strong>Usage with wallet_switchEthereumChain</strong></p> <p>We recommend using this method with wallet_addEthereumChain:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> Provider <span class="token operator">=</span> <span class="token function">getProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> Provider<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'wallet_switchEthereumChain'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">chainId</span><span class="token operator">:</span> <span class="token string">'0xf00'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>switchError<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// This error code indicates that the chain has not been added to Bitkeep.</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>switchError<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">4902</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">await</span> ethereum<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'wallet_addEthereumChain'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">chainId</span><span class="token operator">:</span> <span class="token string">'0xf00'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">chainName</span><span class="token operator">:</span> <span class="token string">'...'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">rpcUrls</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'https://...'</span><span class="token punctuation">]</span> <span class="token comment">/* ... */</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>addError<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// handle &quot;add&quot; error</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// handle other &quot;switch&quot; errors</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div></li> <li><p><strong>wallet_switchEthereumChain</strong></p> <p>Creates a confirmation asking the user to switch to the chain with the specified chainId.</p> <p><strong>Parameters:</strong></p> <p>For the rpcUrls and blockExplorerUrls arrays, at least one element is required, and only the first element will be used.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">interface</span> <span class="token class-name">SwitchEthereumChainParameter</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">chainId</span><span class="token operator">:</span> string<span class="token punctuation">;</span> <span class="token comment">// A 0x-prefixed hexadecimal string</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>Returns</strong></p> <p>null - The method returns null if the request was successful, and an error otherwise.</p> <p>If the error code (<code>error.code</code>) is <code>4902</code>, then the requested chain has not been added by BitKeep, and you have to request to add it via <code>wallet_addEthereumChain</code>.</p> <p><strong>Description</strong></p> <p>As with any method that causes a confirmation to appear, <code>wallet_switchEthereumChain</code> should only be called as a result of direct user action, such as the click of a button.</p> <p>Bitkeep will automatically reject the request under the following circumstances:</p> <ul><li>If the chain ID is malformed</li> <li>If the chain with the specified chain ID has not been added to BitKeep</li></ul></li></ul> <h3 id="ethereum-json-rpc-methods"><a href="#ethereum-json-rpc-methods" class="header-anchor">#</a> Ethereum JSON-RPC Methods</h3> <p>For the Ethereum JSON-RPC API, please see the <a href="https://ethereum.org/en/developers/docs/apis/json-rpc/#json-rpc-methods" target="_blank" rel="noopener noreferrer">Ethereum wiki<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.
How to use reference to  <a href="https://metamask.github.io/api-playground/api-documentation" target="_blank" rel="noopener noreferrer">API Playground<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <ul><li><a href="https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_accounts" target="_blank" rel="noopener noreferrer">eth_accounts<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_accounts" target="_blank" rel="noopener noreferrer">eth_call<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_getbalance" target="_blank" rel="noopener noreferrer">eth_getBalance<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_sendtransaction" target="_blank" rel="noopener noreferrer">eth_sendTransaction<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_sign" target="_blank" rel="noopener noreferrer">eth_sign<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code>
  <span class="token keyword">const</span> Provider <span class="token operator">=</span> <span class="token function">getProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> Provider<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>method<span class="token operator">:</span><span class="token string">&quot;eth_accounts&quot;</span><span class="token punctuation">,</span> params<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">await</span> Provider<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>method<span class="token operator">:</span><span class="token string">&quot;eth_getBalance&quot;</span><span class="token punctuation">,</span> params<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="event-listeners"><a href="#event-listeners" class="header-anchor">#</a> Event listeners</h3> <p>Notify when address and network changed . used <a href="https://www.npmjs.com/package/eventemitter3" target="_blank" rel="noopener noreferrer">eventemitter3<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> Provider <span class="token operator">=</span> <span class="token function">getProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// reomove all listeners</span>
Provider<span class="token punctuation">.</span><span class="token function">removeAllListeners</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">handleAccountsChainChanged</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  Provider<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'accountsChanged'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>address<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Handle the new accounts, or lack thereof.</span>
    <span class="token comment">// &quot;accounts&quot; will always be an array, but it can be empty.</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'address changed'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Provider<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'chainChanged'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">chainId</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Handle the new chain.</span>
    <span class="token comment">// Correctly handling chain changes can be complicated.</span>
    <span class="token comment">// We recommend reloading the page unless you have good reason not to.</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'chainid changed'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>Also, don't forget to remove listeners once you are done listening to them (for example on component unmount in React).
Prevent multiple listening, and clear it before listening <code>removeAllListeners</code>.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> Provider <span class="token operator">=</span> <span class="token function">getProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">handleAccountsChanged</span><span class="token punctuation">(</span><span class="token parameter">accounts</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
Provider<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'accountsChanged'</span><span class="token punctuation">,</span> handleAccountsChanged<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//remove</span>
Provider<span class="token punctuation">.</span><span class="token function">removeAllListeners</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//remove all</span>
Provider<span class="token punctuation">.</span><span class="token function">removeListener</span><span class="token punctuation">(</span><span class="token string">'accountsChanged'</span><span class="token punctuation">,</span> handleAccountsChanged<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// only remove accountsChanged</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>accountsChanged</strong></p> <p>The BitKeep provider emits this event whenever the return value of the eth_accounts RPC method changes. eth_accounts returns an array that is either empty or contains a single account address. The returned address, if any, is the address of the most recently used account that the caller is permitted to access. Callers are identified by their URL origin, which means that all sites with the same origin share the same permissions.</p> <p>This means that accountsChanged will be emitted whenever the user's exposed account address changes.</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code>  <span class="token keyword">const</span> Provider <span class="token operator">=</span> <span class="token function">getProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Provider<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'accountsChanged'</span><span class="token punctuation">,</span> <span class="token function-variable function">handler</span><span class="token operator">:</span> <span class="token punctuation">(</span>accounts<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>chainChanged</strong>
The BitKeep provider emits this event when the currently connected chain changes.</p> <p>All RPC requests are submitted to the currently connected chain. Therefore, it's critical to keep track of the current chain ID by listening for this event.</p> <p>We strongly recommend reloading the page on chain changes, unless you have good reason not to.</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code>  <span class="token keyword">const</span> Provider <span class="token operator">=</span> <span class="token function">getProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Provider<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'accountsChanged'</span><span class="token punctuation">,</span> <span class="token function-variable function">handler</span><span class="token operator">:</span> <span class="token punctuation">(</span>accounts<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="errors"><a href="#errors" class="header-anchor">#</a> Errors</h3> <p>All errors thrown or returned by the MetaMask provider follow this interface:</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">ProviderRpcError</span> <span class="token keyword">extends</span> <span class="token class-name">Error</span> <span class="token punctuation">{</span>
  message<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  code<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  data<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>The ethereum.request(args) method throws errors eagerly. You can often use the error code property to determine why the request failed. Common codes and their meaning include:</p> <ul><li><code>4001</code> <ul><li>The request was rejected by the user</li></ul></li> <li><code>-32603</code> <ul><li>Internal error or The parameters were invalid</li></ul></li></ul> <h3 id="signing-data"><a href="#signing-data" class="header-anchor">#</a> Signing Data</h3> <ul><li><code>eth_sign</code></li> <li><code>personal_sign</code></li> <li><code>eth_signTypedData</code></li> <li><code>eth_signTypedData_v3</code></li> <li><code>eth_signTypedData_v4</code></li></ul> <p>You can refer to  docs</p> <ul><li><a href="https://docs.metamask.io/guide/signing-data.html#signing-data-with-metamask" target="_blank" rel="noopener noreferrer">signing-data-with-metamask<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/MetaMask/eth-sig-util" target="_blank" rel="noopener noreferrer">eth-sig-util<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li> <li><a href="https://github.com/MetaMask/test-dapp" target="_blank" rel="noopener noreferrer">demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="sendtransaction-transfer"><a href="#sendtransaction-transfer" class="header-anchor">#</a> sendTransaction(Transfer)</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> Provider <span class="token operator">=</span> <span class="token function">getProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> transactionParameters <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">nonce</span><span class="token operator">:</span> <span class="token string">'0x00'</span><span class="token punctuation">,</span> <span class="token comment">// ignored by Bitkeep</span>
  <span class="token literal-property property">gasPrice</span><span class="token operator">:</span> <span class="token string">'0x09184e72a000'</span><span class="token punctuation">,</span> <span class="token comment">// customizable by user during Bitkeep confirmation.</span>
  <span class="token literal-property property">gas</span><span class="token operator">:</span> <span class="token string">'0x2710'</span><span class="token punctuation">,</span> <span class="token comment">// customizable by user during Bitkeep confirmation.</span>
  <span class="token literal-property property">to</span><span class="token operator">:</span> <span class="token string">'0x0000000000000000000000000000000000000000'</span><span class="token punctuation">,</span> <span class="token comment">// Required except during contract publications.</span>
  <span class="token literal-property property">from</span><span class="token operator">:</span> Provider<span class="token punctuation">.</span>selectedAddress<span class="token punctuation">,</span> <span class="token comment">// must match user's active address.</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'0x00'</span><span class="token punctuation">,</span> <span class="token comment">// Only required to send ether to the recipient from the initiating external account.</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span>
    <span class="token string">'0x7f7465737432000000000000000000000000000000000000000000000000000000600057'</span><span class="token punctuation">,</span> <span class="token comment">// Optional, but used for defining smart contract creation and interaction.</span>
  <span class="token literal-property property">chainId</span><span class="token operator">:</span> <span class="token string">'0x3'</span><span class="token punctuation">,</span> <span class="token comment">// Used to prevent transaction reuse across blockchains. Auto-filled by Bitkeep.</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// txHash is a hex string</span>
<span class="token comment">// As with any RPC call, it may throw an error</span>
<span class="token keyword">const</span> txHash <span class="token operator">=</span> <span class="token keyword">await</span> Provider<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'eth_sendTransaction'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">[</span>transactionParameters<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// if used web3</span>
<span class="token keyword">const</span> accounts <span class="token operator">=</span> <span class="token keyword">await</span> Provider<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'eth_requestAccounts'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> web3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Web3</span><span class="token punctuation">(</span>Provider<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> web3<span class="token punctuation">.</span>eth<span class="token punctuation">.</span><span class="token function">sendTransaction</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">from</span><span class="token operator">:</span> Provider<span class="token punctuation">.</span>selectedAddress<span class="token punctuation">,</span>
  <span class="token literal-property property">to</span><span class="token operator">:</span> <span class="token string">'0x0000000000000000000000000000000000000000'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> web3<span class="token punctuation">.</span>utils<span class="token punctuation">.</span><span class="token function">toWei</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'ether'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h2 id="tron"><a href="#tron" class="header-anchor">#</a> Tron</h2> <p>We provide <a href="https://github.com/bitkeepwallet/download/tree/example/example/tron/dapp" target="_blank" rel="noopener noreferrer">Simple demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and are compatible with <a href="https://developers.tron.network/docs/dapp-integrate-with-tronlink-introduction" target="_blank" rel="noopener noreferrer">tronlink dapp<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h3 id="isinstalled"><a href="#isinstalled" class="header-anchor">#</a> isInstalled</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> isBitKeepInstalled <span class="token operator">=</span> window<span class="token punctuation">.</span>tronLink <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span>isBitKeep<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="eth-requestaccounts-request-authorization-to-connect"><a href="#eth-requestaccounts-request-authorization-to-connect" class="header-anchor">#</a> eth_requestAccounts(request authorization to connect)</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> tronLink<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'tron_requestAccounts'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> address <span class="token operator">=</span> tronWeb<span class="token punctuation">.</span>defaultAddress<span class="token punctuation">.</span>base58<span class="token punctuation">;</span>
  <span class="token keyword">const</span> balance <span class="token operator">=</span> <span class="token keyword">await</span> tronWeb<span class="token punctuation">.</span>trx<span class="token punctuation">.</span><span class="token function">getBalance</span><span class="token punctuation">(</span>address<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="connected"><a href="#connected" class="header-anchor">#</a> connected</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  window<span class="token punctuation">.</span>tronWeb<span class="token punctuation">.</span>ready<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="sendtransaction-transfer-2"><a href="#sendtransaction-transfer-2" class="header-anchor">#</a> sendTransaction(Transfer)</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> tronweb <span class="token operator">=</span> window<span class="token punctuation">.</span>tronWeb<span class="token punctuation">;</span>
<span class="token keyword">var</span> tx <span class="token operator">=</span> <span class="token keyword">await</span> tronweb<span class="token punctuation">.</span>transactionBuilder<span class="token punctuation">.</span><span class="token function">sendTrx</span><span class="token punctuation">(</span>
  <span class="token string">'TW8u1VSwbXY7o7H9kC8HmCNTiSXvD69Uiw'</span><span class="token punctuation">,</span>
  <span class="token number">1000000</span><span class="token punctuation">,</span>
  tronWeb<span class="token punctuation">.</span>defaultAddress<span class="token punctuation">.</span>base58
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> signedTx <span class="token operator">=</span> <span class="token keyword">await</span> tronweb<span class="token punctuation">.</span>trx<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span>tx<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> broastTx <span class="token operator">=</span> <span class="token keyword">await</span> tronweb<span class="token punctuation">.</span>trx<span class="token punctuation">.</span><span class="token function">sendRawTransaction</span><span class="token punctuation">(</span>signedTx<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>broastTx<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>broastTx<span class="token punctuation">.</span>txid<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Token</span>
<span class="token keyword">let</span> decimal <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> Contract <span class="token operator">=</span> <span class="token keyword">await</span> tronWeb
  <span class="token punctuation">.</span><span class="token function">contract</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token string">'TLa2f6VPqDgRE67v1736s7bJ8Ray5wYjU7'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//WIN</span>
<span class="token keyword">const</span> decimalCall <span class="token operator">=</span> Contract<span class="token punctuation">.</span>decimals <span class="token operator">||</span> Contract<span class="token punctuation">.</span><span class="token constant">DECIMALS</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>decimalCall<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  decimal <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">decimalCall</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> broastTx <span class="token operator">=</span> <span class="token keyword">await</span> Contract<span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span>
  <span class="token string">'TW8u1VSwbXY7o7H9kC8HmCNTiSXvD69Uiw'</span><span class="token punctuation">,</span>
  <span class="token comment">// &quot;0xde0b6b3a7640000&quot;</span>
  tronWeb<span class="token punctuation">.</span><span class="token function">toHex</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> decimal<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
  <span class="token punctuation">.</span>send
  <span class="token comment">// {</span>
  <span class="token comment">//     feeLimit: 10000000</span>
  <span class="token comment">// }</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>broastTx<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h2 id="solana"><a href="#solana" class="header-anchor">#</a> solana</h2> <p>We provide a <a href="https://github.com/bitkeepwallet/download/tree/example/example/solana/dapp" target="_blank" rel="noopener noreferrer">Simple demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, and you can also refer to <a href="https://solana-labs.github.io/solana-web3.js/" target="_blank" rel="noopener noreferrer">solana-web3<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Quickly support bitkeep Wallet If the Other wallet is already available.</p> <ul><li><p>MathWallet</p> <p>If the MathWallet Wallet is already available. You can replace <code>window.solana</code> with <code>window.bitkeep.solana</code> as a provider.</p></li></ul> <h3 id="isinstalled-2"><a href="#isinstalled-2" class="header-anchor">#</a> IsInstalled</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> isBitKeepInstalled <span class="token operator">=</span> window<span class="token punctuation">.</span>isBitKeep <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span>bitkeep<span class="token punctuation">.</span>solana<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="provider-2"><a href="#provider-2" class="header-anchor">#</a> Provider</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> provider <span class="token operator">=</span> window<span class="token punctuation">.</span>bitkeep <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span>bitkeep<span class="token punctuation">.</span>solana<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>provider<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'https://bitkeep.com/download?type=2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">throw</span>  <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Please guide users to download from our official website</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> provider<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="connect-request-authorization-to-connect"><a href="#connect-request-authorization-to-connect" class="header-anchor">#</a> connect(request authorization to connect)</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> window<span class="token punctuation">.</span>bitkeep<span class="token punctuation">.</span>solana<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> publicKey <span class="token operator">=</span> <span class="token keyword">await</span> window<span class="token punctuation">.</span>bitkeep<span class="token punctuation">.</span>solana<span class="token punctuation">.</span><span class="token function">getAccount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  window<span class="token punctuation">.</span>bitkeep<span class="token punctuation">.</span>solana<span class="token punctuation">.</span>publicKey<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Once the web application is connected to Bitkeep,</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'connected error'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="connected-2"><a href="#connected-2" class="header-anchor">#</a> connected</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span>bitkeep<span class="token punctuation">.</span>solana<span class="token punctuation">.</span>connected<span class="token punctuation">;</span>
<span class="token keyword">const</span> publicKey <span class="token operator">=</span> <span class="token keyword">await</span> window<span class="token punctuation">.</span>bitkeep<span class="token punctuation">.</span>solana<span class="token punctuation">.</span><span class="token function">getAccount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>bitkeep<span class="token punctuation">.</span>solana<span class="token punctuation">.</span>publicKey<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Once the web application is connected to Bitkeep</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="signmessage"><a href="#signmessage" class="header-anchor">#</a> signMessage</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//string</span>
window<span class="token punctuation">.</span>bitkeep<span class="token punctuation">.</span>solana<span class="token punctuation">.</span><span class="token function">signMessage</span><span class="token punctuation">(</span>
  <span class="token string">'020006106e655af38ff7324bbf1d4e16b06084763269b9'</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// uint8Array</span>
<span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">You can use uint8array to verify</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">const</span> encodedMessage <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TextEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> signedMessage <span class="token operator">=</span> <span class="token keyword">await</span> window<span class="token punctuation">.</span>bitkeep<span class="token punctuation">.</span>solana<span class="token punctuation">.</span><span class="token function">signMessage</span><span class="token punctuation">(</span>encodedMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> nacl <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'tweetnacl'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> PublicKey <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@solana/web3.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// nacl.sign.detached.verify(encodedMessage, signedMessage, publicKey)</span>
nacl<span class="token punctuation">.</span>sign<span class="token punctuation">.</span>detached<span class="token punctuation">.</span><span class="token function">verify</span><span class="token punctuation">(</span>
  encodedMessage<span class="token punctuation">,</span>
  signedMessage<span class="token punctuation">,</span>
  <span class="token keyword">new</span> <span class="token class-name">PublicKey</span><span class="token punctuation">(</span>address<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="event-listeners-2"><a href="#event-listeners-2" class="header-anchor">#</a> Event listeners</h3> <p>used <a href="https://www.npmjs.com/package/eventemitter3" target="_blank" rel="noopener noreferrer">eventemitter3<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span>bitkeep<span class="token punctuation">.</span>solana<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'connect'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'connected!'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="sendtransaction"><a href="#sendtransaction" class="header-anchor">#</a> sendTransaction</h3> <p>You can refer to the following demo :
<a href="https://github.com/bitkeepwallet/download/blob/example/example/solana/dapp/index.html" target="_blank" rel="noopener noreferrer">simple demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://github.com/solana-labs/solana/tree/master/web3.js/examples" target="_blank" rel="noopener noreferrer">web3 demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://github.com/solana-labs/solana-program-library/tree/master/token/js/examples" target="_blank" rel="noopener noreferrer">Token demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="terra"><a href="#terra" class="header-anchor">#</a> Terra</h2> <p>You can refer to the following <a href="https://github.com/terra-money/wallet-provider/tree/main/templates" target="_blank" rel="noopener noreferrer">simple demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="walletconnect"><a href="#walletconnect" class="header-anchor">#</a> WalletConnect</h2> <h3 id="evm-webapp"><a href="#evm-webapp" class="header-anchor">#</a> EVM(WebApp)</h3> <p>WalletConnect is an open protocol for connecting wallets and DApps (Web3 applications), which uses a bridge server to establish a remote connection between two applications and/or devices, scan a QR code to establish a connection and start communication. BitKeep Wallet App now supports WalletConnect。</p> <p>For more detailed document, please refer to the <a href="https://docs.walletconnect.com" target="_blank" rel="noopener noreferrer">https://docs.walletconnect.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li><a href="https://react-app.walletconnect.com/" target="_blank" rel="noopener noreferrer">react-app.walletconnect.com/)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.walletconnect.com/quick-start/dapps/web3-provider" target="_blank" rel="noopener noreferrer">Web3 Provider<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.walletconnect.com/quick-start/dapps/client" target="_blank" rel="noopener noreferrer">Standalone Client<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/WalletConnect/web-examples" target="_blank" rel="noopener noreferrer">example<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>we provide a <a href="https://github.com/bitkeepwallet/download/tree/example/example/walletConnect" target="_blank" rel="noopener noreferrer">simple demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language- extra-class"><pre><code>npm install --save @walletconnect/client @walletconnect/qrcode-modal
</code></pre></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> WalletConnect <span class="token keyword">from</span> <span class="token string">'@walletconnect/client'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> QRCodeModal <span class="token keyword">from</span> <span class="token string">'@walletconnect/qrcode-modal'</span><span class="token punctuation">;</span>
<span class="token comment">// Create a connector</span>
<span class="token keyword">const</span> connector <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WalletConnect</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">bridge</span><span class="token operator">:</span> <span class="token string">'https://bridge.walletconnect.org'</span><span class="token punctuation">,</span> <span class="token comment">// Required</span>
  <span class="token literal-property property">qrcodeModal</span><span class="token operator">:</span> QRCodeModal<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Check if connection is already established</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>connector<span class="token punctuation">.</span>connected<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// create new session</span>
  connector<span class="token punctuation">.</span><span class="token function">createSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// Subscribe to connection events</span>
connector<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'connect'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> payload</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> error<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// Get provided accounts and chainId</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> accounts<span class="token punctuation">,</span> chainId <span class="token punctuation">}</span> <span class="token operator">=</span> payload<span class="token punctuation">.</span>params<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
connector<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'session_update'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> payload</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> error<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// Get updated accounts and chainId</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> accounts<span class="token punctuation">,</span> chainId <span class="token punctuation">}</span> <span class="token operator">=</span> payload<span class="token punctuation">.</span>params<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
connector<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'disconnect'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> payload</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> error<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// Delete connector</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><h3 id="evm-native-app-sdk"><a href="#evm-native-app-sdk" class="header-anchor">#</a> EVM(Native App SDK)</h3> <p>Please refer to the <a href="https://docs.walletconnect.com/quick-start" target="_blank" rel="noopener noreferrer">WalletConnect Doc<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and follow to find the docking documentation of your current program</p> <h2 id="bitkeep-chrome-extension-swap"><a href="#bitkeep-chrome-extension-swap" class="header-anchor">#</a> Bitkeep(Chrome extension swap)</h2> <blockquote><p><font color="#fdd000">Only BitKeep Chrome extension is supported for the time being</font></p></blockquote> <blockquote><p><font color="#fdd000">If you send an unsupported mainnet, an error will be prompted</font></p></blockquote> <ul><li><h3 id="window-bitkeep-navigateto"><a href="#window-bitkeep-navigateto" class="header-anchor">#</a> window.bitkeep.navigateTo</h3> <p>invoke swap， Support Mainnet can refer to <a href="/swapchainList.json">support mainnet</a>.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>window<span class="token punctuation">.</span>bitkeep<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token string">'swap'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">chain</span><span class="token operator">:</span> <span class="token string">&quot;eth&quot;</span>
    <span class="token literal-property property">fromCoin</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">chain</span><span class="token operator">:</span> <span class="token string">'eth'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">chainName</span><span class="token operator">:</span> <span class="token string">'Ethereum'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">contract</span><span class="token operator">:</span> <span class="token string">'0xdac17f958d2ee523a2206206994597c13d831ec7'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'https://cdn.bitkeep.vip/coins/u/usdt_eth.png'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">symbol</span><span class="token operator">:</span> <span class="token string">'USDT'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">toCoin</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">chain</span><span class="token operator">:</span> <span class="token string">'eth'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">chainName</span><span class="token operator">:</span> <span class="token string">'Ethereum'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'https://cdn.bitkeep.vip/u_b_bae388c0-9afd-11ec-aac8-bf8a172584ab.png'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">symbol</span><span class="token operator">:</span> <span class="token string">'ETH'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="params"><a href="#params" class="header-anchor">#</a> params</h3> <table><thead><tr><th>key</th> <th>type</th> <th>require</th> <th>default</th> <th>description</th></tr></thead> <tbody><tr><td>fromCoin</td> <td>object</td> <td>false</td> <td>Current Mainnet Token</td> <td>Token to be swap. Refer to the following table for details</td></tr> <tr><td>toCoin</td> <td>object</td> <td>false</td> <td>Current Mainnet Token usdt/usdc</td> <td>Token to be converted. Refer to the following table for details</td></tr></tbody></table> <table><thead><tr><th>fromCoin/toCoin</th> <th>type</th> <th>require</th> <th>value</th> <th>description</th></tr></thead> <tbody><tr><td>chain</td> <td>string</td> <td>true</td> <td>eth</td> <td>&quot;eth&quot; ==&quot;Ethereum&quot; Mainnet name <a href="/swapchainList.json">reference json</a></td></tr> <tr><td>chainName</td> <td>string</td> <td>false</td> <td>Ethereum</td> <td>Mainnet name</td></tr> <tr><td>contract</td> <td>string</td> <td>false</td> <td>contract address</td> <td>token contract address</td></tr> <tr><td>icon</td> <td>string</td> <td>true</td> <td>http://cdn.bitkeep.vip/u_b_81d12c10-146e-11ec-9c06-1d0c5ac6bcb6.jpeg</td> <td>token icon</td></tr> <tr><td>symbol</td> <td>string</td> <td>true</td> <td>usdt</td> <td>token name</td></tr></tbody></table></li></ul> <h2 id="used-open-source-library"><a href="#used-open-source-library" class="header-anchor">#</a> Used Open source library</h2> <p>If you use open source code and need us to support push open source code, please <a href="https://bitkeep.com/about#Contact_us" target="_blank" rel="noopener noreferrer">Contact us<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>https://github.com/bitkeepwallet/web3-react</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/bitkeepwallet/docs/edit/master/docs/guide/connect-wallet-for-dapp.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">10/10/2022, 2:20:42 PM</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.6330c8a9.js" defer></script><script src="/assets/js/4.83f9d4d7.js" defer></script><script src="/assets/js/10.f240b555.js" defer></script><script src="/assets/js/5.45025c3e.js" defer></script>
  </body>
</html>
