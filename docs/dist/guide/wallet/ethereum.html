<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Ethereum(EVM) | BitKeep Docs</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/bitkeep-icon.svg">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <link rel="shortcut icon" href="/bitkeep-icon.svg" color="#3eaf7c" type="image/x-icon">
    <script src="/js/extend.js"></script>
    <meta name="description" content="Developer documentation for BitKeep Wallet">
    <meta name="theme-color" content="#7524F9">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    <link rel="preload" href="/assets/css/0.styles.7ac5815e.css" as="style"><link rel="preload" href="/assets/js/app.0084aa93.js" as="script"><link rel="preload" href="/assets/js/4.47bce87d.js" as="script"><link rel="preload" href="/assets/js/21.10103ffd.js" as="script"><link rel="preload" href="/assets/js/5.63a550d4.js" as="script"><link rel="prefetch" href="/assets/js/10.4587aa98.js"><link rel="prefetch" href="/assets/js/11.bc2df2ae.js"><link rel="prefetch" href="/assets/js/12.40d7379e.js"><link rel="prefetch" href="/assets/js/13.a0e0d187.js"><link rel="prefetch" href="/assets/js/14.1486e28d.js"><link rel="prefetch" href="/assets/js/15.5306bee2.js"><link rel="prefetch" href="/assets/js/16.e37a7a91.js"><link rel="prefetch" href="/assets/js/17.a2f3ccac.js"><link rel="prefetch" href="/assets/js/18.7c3544f4.js"><link rel="prefetch" href="/assets/js/19.e873d222.js"><link rel="prefetch" href="/assets/js/20.1034c40f.js"><link rel="prefetch" href="/assets/js/22.9d5b91e2.js"><link rel="prefetch" href="/assets/js/23.fb295a8a.js"><link rel="prefetch" href="/assets/js/24.e7e4302a.js"><link rel="prefetch" href="/assets/js/25.63126efa.js"><link rel="prefetch" href="/assets/js/26.7a36da9a.js"><link rel="prefetch" href="/assets/js/27.b7712c26.js"><link rel="prefetch" href="/assets/js/28.21e9a324.js"><link rel="prefetch" href="/assets/js/29.7fe2735c.js"><link rel="prefetch" href="/assets/js/30.765fc534.js"><link rel="prefetch" href="/assets/js/31.996799fb.js"><link rel="prefetch" href="/assets/js/32.c2024999.js"><link rel="prefetch" href="/assets/js/33.177f597a.js"><link rel="prefetch" href="/assets/js/34.988f373d.js"><link rel="prefetch" href="/assets/js/35.888274df.js"><link rel="prefetch" href="/assets/js/36.7e5ad3b3.js"><link rel="prefetch" href="/assets/js/37.9769bb8c.js"><link rel="prefetch" href="/assets/js/38.c1371dd0.js"><link rel="prefetch" href="/assets/js/39.cf995dbc.js"><link rel="prefetch" href="/assets/js/40.258abebe.js"><link rel="prefetch" href="/assets/js/6.54a51af8.js"><link rel="prefetch" href="/assets/js/7.f19e8f7e.js"><link rel="prefetch" href="/assets/js/8.ee2d5edf.js"><link rel="prefetch" href="/assets/js/9.f413e9b8.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.008c7241.js"><link rel="prefetch" href="/assets/js/vendors~notification.6eee5875.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7ac5815e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/guide/" class="home-link router-link-active"><img src="/bitkeep-icon.svg" alt="BitKeep Docs" class="logo"> <span class="site-name can-hide">BitKeep Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="https://bitkeep.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Homepage
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/wallet/ethereum.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/guide/zh-cn/wallet/ethereum.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/bitkeepwallet/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="https://bitkeep.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Homepage
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/wallet/ethereum.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/guide/zh-cn/wallet/ethereum.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/bitkeepwallet/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/" aria-current="page" class="sidebar-link">Introduction</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>DApp Development</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>Extension Wallet</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/wallet/introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/guide/wallet/quickly.html" class="sidebar-link">Quickly support BitKeep Wallet</a></li><li><a href="/guide/wallet/ethereum.html" aria-current="page" class="active sidebar-link">Ethereum(EVM)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/wallet/ethereum.html#detect-the-ethereum-provider" class="sidebar-link">Detect the Ethereum provider</a></li><li class="sidebar-sub-header"><a href="/guide/wallet/ethereum.html#basic-usage" class="sidebar-link">Basic Usage</a></li><li class="sidebar-sub-header"><a href="/guide/wallet/ethereum.html#chain-ids" class="sidebar-link">Chain IDs</a></li><li class="sidebar-sub-header"><a href="/guide/wallet/ethereum.html#isconnected" class="sidebar-link">isConnected()</a></li><li class="sidebar-sub-header"><a href="/guide/wallet/ethereum.html#request-args" class="sidebar-link">request(args)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/wallet/ethereum.html#eth-requestaccounts" class="sidebar-link">eth_requestAccounts</a></li><li class="sidebar-sub-header"><a href="/guide/wallet/ethereum.html#wallet-watchasset" class="sidebar-link">wallet_watchAsset</a></li><li class="sidebar-sub-header"><a href="/guide/wallet/ethereum.html#wallet-switchethereumchain-wallet-addethereumchain" class="sidebar-link">walletswitchEthereumChain/walletaddEthereumChain</a></li><li class="sidebar-sub-header"><a href="/guide/wallet/ethereum.html#sendtransaction-transfer" class="sidebar-link">sendTransaction(Transfer)</a></li></ul></li><li class="sidebar-sub-header"><a href="/guide/wallet/ethereum.html#ethereum-json-rpc-methods" class="sidebar-link">Ethereum JSON-RPC Methods</a></li><li class="sidebar-sub-header"><a href="/guide/wallet/ethereum.html#event-listeners" class="sidebar-link">Event listeners</a></li><li class="sidebar-sub-header"><a href="/guide/wallet/ethereum.html#signing-data" class="sidebar-link">Signing Data</a></li><li class="sidebar-sub-header"><a href="/guide/wallet/ethereum.html#errors" class="sidebar-link">Errors</a></li></ul></li><li><a href="/guide/wallet/solana.html" class="sidebar-link">Solana</a></li><li><a href="/guide/wallet/tron.html" class="sidebar-link">Tron</a></li><li><a href="/guide/wallet/aptos.html" class="sidebar-link">Aptos</a></li><li><a href="/guide/wallet/bitkeep.html" class="sidebar-link">BitKeep Swap</a></li><li><a href="/guide/wallet/faq.html" class="sidebar-link">FAQs</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>Mobile</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/mobile/walletconnet.html" class="sidebar-link">WalletConnect</a></li><li><a href="/guide/mobile/Deeplink.html" class="sidebar-link">BKConnect（Deeplink）</a></li><li><a href="/guide/mobile/switch-network-for-dapp.html" class="sidebar-link">Switch Network</a></li><li><a href="/guide/mobile/webview-function.html" class="sidebar-link">Webview Method(only Mobile)</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Resources</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/resources.html" class="sidebar-link">resources</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="ethereum-evm"><a href="#ethereum-evm" class="header-anchor">#</a> Ethereum(EVM)</h1> <p>BitKeep injects a global API into websites visited by its users at <code>window?.bitkeep?.ethereum</code>. This API allows websites to request users' Ethereum accounts, read data from blockchains the user is connected to, and suggest that the user sign messages and transactions. The presence of the provider object indicates an Ethereum user.</p> <h2 id="detect-the-ethereum-provider"><a href="#detect-the-ethereum-provider" class="header-anchor">#</a> Detect the Ethereum provider</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> provider <span class="token operator">=</span> window<span class="token punctuation">.</span>bitkeep <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span>bitkeep<span class="token punctuation">.</span>ethereum<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>provider<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'https://bitkeep.com/en/download?type=2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">throw</span> <span class="token string">&quot;Please go to our official website to download!!&quot;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> provider<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="basic-usage"><a href="#basic-usage" class="header-anchor">#</a> Basic Usage</h2> <p>For any non-trivial Ethereum web application — a.k.a. dapp, web3 site etc. — to work, you will have to:</p> <ol><li>Detect the Ethereum provider (<code>window?.bitkeep?.ethereum</code>)</li> <li>Detect which Ethereum network the user is connected to</li> <li>Get the user's Ethereum account(s)</li></ol> <p>You can refer to <a href="#eth-requestaccounts">eth-requestaccounts</a> or <a href="/faq.html#_3-address-conflicts-when-switching-network">address-conflicts-when-switching-network</a> code snippet</p> <p>The provider API is all you need to create a full-featured web3 application.</p> <p>You can refer a third-party base about Web3.0 login to support Bitkeep Wallet quickly,   such as:</p> <div class="custom-block tip"><p class="custom-block-title">Note</p> <p>You can  use third-party libraries in conjunction with <code>window.bitkeep.ethereum</code></p></div> <ul><li>library
<ul><li><a href="https://www.npmjs.com/package/web3" target="_blank" rel="noopener noreferrer">web3js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.npmjs.com/package/ethers" target="_blank" rel="noopener noreferrer">ethers<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li>npm
<ul><li><a href="https://www.npmjs.com/package/bitkeep-web3modal" target="_blank" rel="noopener noreferrer">bitkeep-web3modal<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//npm install bitkeep-web3modal  </span>
<span class="token comment">// fork from https://github.com/WalletConnect/web3modal  https://github.com/WalletConnect/web3modal/issues/574</span>
<span class="token keyword">import</span> web3modal <span class="token keyword">from</span> <span class="token string">'bitkeep-web3modal'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> web3Modal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Web3Modal</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">network</span><span class="token operator">:</span> <span class="token string">'mainnet'</span><span class="token punctuation">,</span> <span class="token comment">// optional</span>
  <span class="token literal-property property">cacheProvider</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// optional</span>
  <span class="token literal-property property">providerOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">bitkeep</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword">package</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">walletconnect</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">display</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">logo</span><span class="token operator">:</span> <span class="token string">'data:image/gif;base64,INSERT_BASE64_STRING'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Mobile'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">'Scan qrcode with your mobile wallet'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token keyword">package</span><span class="token operator">:</span> WalletConnectProvider<span class="token punctuation">,</span>
      <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">infuraId</span><span class="token operator">:</span> <span class="token string">'INFURA_ID'</span><span class="token punctuation">,</span> <span class="token comment">// required</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// required</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h2 id="chain-ids"><a href="#chain-ids" class="header-anchor">#</a> Chain IDs</h2> <p>These are the IDs of the Ethereum chains that BitKeep supports by default. Consult <a href="https://chainlist.org/zh" target="_blank" rel="noopener noreferrer">chainid.network<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>for more.</p> <table><thead><tr><th>Hex</th> <th>Decimal</th> <th>Network</th> <th>Hex</th> <th>Decimal</th> <th>Network</th></tr></thead> <tbody><tr><td>0x1</td> <td>1</td> <td>Ethereum</td> <td>0xa</td> <td>10</td> <td>Optimism</td></tr> <tr><td>0x18</td> <td>24</td> <td>KardiaChain</td> <td>0x19</td> <td>25</td> <td>Cronos</td></tr> <tr><td>0x38</td> <td>56</td> <td>BNB Chain</td> <td>0x39</td> <td>57</td> <td>Syscoin</td></tr> <tr><td>0x3d</td> <td>61</td> <td>Ethereum Classic</td> <td>0x42</td> <td>66</td> <td>OKX Chain</td></tr> <tr><td>0x52</td> <td>82</td> <td>Meter Mainnet</td> <td>0x56</td> <td>86</td> <td>GateChain</td></tr> <tr><td>0x58</td> <td>88</td> <td>TomoChain</td> <td>0x64</td> <td>100</td> <td>Gnosis Chain</td></tr> <tr><td>0x6a</td> <td>106</td> <td>Velas</td> <td>0x73</td> <td>115</td> <td>Lucky Chain</td></tr> <tr><td>0x7a</td> <td>122</td> <td>Fuse</td> <td>0x80</td> <td>128</td> <td>Heco</td></tr> <tr><td>0x89</td> <td>137</td> <td>Polygon</td> <td>0xc7</td> <td>199</td> <td>BitTorrent</td></tr> <tr><td>0xfa</td> <td>250</td> <td>Fantom</td> <td>0x120</td> <td>288</td> <td>Boba Network</td></tr> <tr><td>0x141</td> <td>321</td> <td>KCC</td> <td>0x334</td> <td>820</td> <td>Callisto Mainnet</td></tr> <tr><td>0x3e6</td> <td>998</td> <td>Lucky Network</td> <td>0x500</td> <td>1280</td> <td>HALO</td></tr> <tr><td>0x505</td> <td>1285</td> <td>Moonriver</td> <td>0x71a</td> <td>1818</td> <td>CUBE</td></tr> <tr><td>0x7e3</td> <td>2019</td> <td>ClassZZ</td> <td>0x868</td> <td>2152</td> <td>Findora</td></tr> <tr><td>0x8ae</td> <td>2222</td> <td>Kava</td> <td>0x1251</td> <td>4689</td> <td>IoTeX</td></tr> <tr><td>0x2019</td> <td>8217</td> <td>KLAY</td> <td>0x2710</td> <td>10000</td> <td>smartBCH</td></tr> <tr><td>0x4b82</td> <td>19330</td> <td>TRUE</td> <td>0x4ef4</td> <td>20212</td> <td>ZSC</td></tr> <tr><td>0x7f08</td> <td>32520</td> <td>Bitgert</td> <td>0xa4b1</td> <td>42161</td> <td>Arbitrum</td></tr> <tr><td>0xa4ec</td> <td>42220</td> <td>Celo</td> <td>0xa516</td> <td>42262</td> <td>Oasis Emerald</td></tr> <tr><td>0xa86a</td> <td>43114</td> <td>AVAX-C</td> <td>0x116e2</td> <td>71394</td> <td>Nervos CKB EVM</td></tr> <tr><td>0x335f9</td> <td>210425</td> <td>PlatON</td> <td>0x3e900</td> <td>256256</td> <td>Caduceus</td></tr> <tr><td>0xa3488</td> <td>668808</td> <td>ASM</td> <td>0x4e454152</td> <td>1313161554</td> <td>Aurora</td></tr> <tr><td>0x63564c40</td> <td>1666600000</td> <td>Harmony</td> <td></td> <td></td> <td></td></tr></tbody></table> <h2 id="isconnected"><a href="#isconnected" class="header-anchor">#</a> isConnected()</h2> <div class="custom-block tip"><p class="custom-block-title">Note</p> <p>Note that this method has nothing to do with the user's accounts.
You may often encounter the word &quot;connected&quot; in reference to whether a web3 site can access the user's accounts. In the provider interface, however, &quot;connected&quot; and &quot;disconnected&quot; refer to whether the provider can make RPC requests to the current chain.</p></div> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> Provider <span class="token operator">=</span> <span class="token function">getProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Provider<span class="token punctuation">.</span><span class="token function">isConnected</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="request-args"><a href="#request-args" class="header-anchor">#</a> request(args)</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token keyword">const</span> Provider <span class="token operator">=</span> <span class="token function">getProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">interface</span> <span class="token class-name">RequestArguments</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">method</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
    params<span class="token operator">?</span><span class="token operator">:</span> unknown<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> object<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  Provider<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>args<span class="token operator">:</span> RequestArguments<span class="token punctuation">)</span><span class="token operator">:</span> Promise<span class="token operator">&lt;</span>unknown<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="eth-requestaccounts"><a href="#eth-requestaccounts" class="header-anchor">#</a> eth_requestAccounts</h3> <div class="custom-block tip"><p class="custom-block-title">Note</p> <p><strong>EIP-1102</strong>
This method is specified by <a href="https://eips.ethereum.org/EIPS/eip-1102" target="_blank" rel="noopener noreferrer">EIP-1102<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. It is equivalent to the deprecated <code>bitkeep.ethereum.enable()</code> provider API method.</p> <p>Under the hood, it calls wallet_requestPermissions for the eth_accounts permission. Since eth_accounts is currently the only permission, this method is all you need for now.</p></div> <p><strong>Returns</strong></p> <p><code>string[]</code> - An array of a single, hexadecimal Ethereum address string.</p> <p><strong>Description</strong></p> <p>Requests that the user provides an Ethereum address to be identified by. Returns a Promise that resolves to an array of a single Ethereum address string. If the user denies the request, the Promise will reject with a 4001 error.</p> <p>The request causes a BitKeep popup to appear. You should only request the user's accounts in response to user action, such as a button click. You should always disable the button that caused the request to be dispatched, while the request is still pending.</p> <p>If you can't retrieve the user's account(s), you should encourage the user to initiate an account request.</p> <ul><li><code>eth_accounts</code> <ul><li>Get user</li></ul></li> <li><code>eth_chainId</code> <ul><li>Get chainid(Hex)</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> Provider <span class="token operator">=</span> <span class="token function">getProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  Provider<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'eth_requestAccounts'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>handleAccountsChainChanged<span class="token punctuation">)</span> <span class="token comment">// address or chainId changed</span>
    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">4001</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// EIP-1193 userRejectedRequest error</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Please connect to MetaMask.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//if used injected</span>
<span class="token keyword">const</span> accounts <span class="token operator">=</span> <span class="token keyword">await</span> Provider<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'eth_requestAccounts'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">handleAccountsChainChanged</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// updated address or chainID,refer to accountsChanged/chainChanged(events)</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>address<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> Provider<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'eth_accounts'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [0x1e805A9aB0FB007B4b9D44d598C6404cE292F20D]</span>
<span class="token keyword">const</span> chainId <span class="token operator">=</span> <span class="token keyword">await</span> Provider<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'eth_chainId'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0x1</span>
<span class="token comment">//if used web3</span>
<span class="token keyword">import</span> Web3 <span class="token keyword">from</span> <span class="token string">'web3'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> accounts <span class="token operator">=</span> <span class="token keyword">await</span> Provider<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'eth_requestAccounts'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//  [0x1e805A9aB0FB007B4b9D44d598C6404cE292F20D]</span>
<span class="token keyword">const</span> web3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Web3</span><span class="token punctuation">(</span>Provider<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">handleAccountsChainChanged</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// updated address or chainID, refer to accountsChanged/chainChanged(events)</span>
<span class="token keyword">const</span> accounts <span class="token operator">=</span> <span class="token keyword">await</span> web3<span class="token punctuation">.</span>eth<span class="token punctuation">.</span><span class="token function">getAccounts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [0x1e805A9aB0FB007B4b9D44d598C6404cE292F20D]</span>
<span class="token keyword">const</span> chainId <span class="token operator">=</span> <span class="token keyword">await</span> web3<span class="token punctuation">.</span>eth<span class="token punctuation">.</span><span class="token function">getChainId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0x1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h3 id="wallet-watchasset"><a href="#wallet-watchasset" class="header-anchor">#</a> wallet_watchAsset</h3> <blockquote><p><strong>EIP-747</strong></p> <p>This method is specified by <a href="https://eips.ethereum.org/EIPS/eip-747" target="_blank" rel="noopener noreferrer">EIP-747<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <p><strong>Parameters</strong></p> <ul><li><code>WatchAssetParams</code> - The metadata of the asset to watch.</li></ul> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code>  <span class="token keyword">interface</span> <span class="token class-name">WatchAssetParams</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">'ERC20'</span><span class="token punctuation">;</span> <span class="token comment">// In the future, other standards will be supported</span>
    options<span class="token operator">:</span> <span class="token punctuation">{</span>
      address<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token comment">// The address of the token contract</span>
      <span class="token string-property property">'symbol'</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token comment">// A ticker symbol or shorthand, up to 11 characters</span>
      decimals<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token comment">// The number of token decimals</span>
      image<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token comment">// A string url of the token logo</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>Returns</strong></p> <p><code>boolean</code> - <code>true</code> if the the token was added, <code>false</code> otherwise</p> <p><strong>Description</strong></p> <p>Requests that the user tracks the token in BitKeep. Returns a boolean indicating if the token was successfully added.</p> <p>Most Ethereum wallets support some set of tokens, usually from a centrally curated registry of tokens. wallet_watchAsset enables web3 application developers to ask their users to track tokens in their wallets, at runtime. Once added, the token is indistinguishable from those added via legacy methods, such as a centralized registry.</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code>  <span class="token keyword">const</span> Provider <span class="token operator">=</span> <span class="token function">getProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Provider
    <span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      method<span class="token operator">:</span> <span class="token string">'wallet_watchAsset'</span><span class="token punctuation">,</span>
      params<span class="token operator">:</span> <span class="token punctuation">{</span>
        type<span class="token operator">:</span> <span class="token string">'ERC20'</span><span class="token punctuation">,</span>
        options<span class="token operator">:</span> <span class="token punctuation">{</span>
          address<span class="token operator">:</span> <span class="token string">'0xb60e8dd61c5d32be8058bb8eb970870f07233155'</span><span class="token punctuation">,</span>
          <span class="token builtin">symbol</span><span class="token operator">:</span> <span class="token string">'FOO'</span><span class="token punctuation">,</span>
          decimals<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
          image<span class="token operator">:</span> <span class="token string">'https://foo.io/token-image.svg'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'FOO successfully added to wallet!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Something went wrong.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token builtin">console</span><span class="token punctuation">.</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="wallet-switchethereumchain-wallet-addethereumchain"><a href="#wallet-switchethereumchain-wallet-addethereumchain" class="header-anchor">#</a> wallet_switchEthereumChain/wallet_addEthereumChain</h3> <ul><li><p><strong>wallet_addEthereumChain</strong></p> <p>Creates a confirmation asking the user to add the specified chain to BitKeep. The user may choose to switch to the chain once it has been added.</p> <p><strong>Parameters:</strong></p> <p>For the rpcUrls and blockExplorerUrls arrays, at least one element is required, and only the first element will be used.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">interface</span> <span class="token class-name">AddEthereumChainParameter</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">chainId</span><span class="token operator">:</span> string<span class="token punctuation">;</span> <span class="token comment">// A 0x-prefixed hexadecimal string</span>
  <span class="token literal-property property">chainName</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
  <span class="token literal-property property">nativeCurrency</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
    <span class="token literal-property property">symbol</span><span class="token operator">:</span> string<span class="token punctuation">,</span> <span class="token comment">// 2-6 characters long</span>
    <span class="token literal-property property">decimals</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token literal-property property">rpcUrls</span><span class="token operator">:</span> string<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  blockExplorerUrls<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  iconUrls<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// Currently ignored.</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>Returns</strong></p> <p>null - The method returns null if the request was successful, and an error otherwise.</p> <p><strong>Usage with wallet_switchEthereumChain</strong></p> <p>We recommend using this method with wallet_addEthereumChain:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> Provider <span class="token operator">=</span> <span class="token function">getProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> Provider<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'wallet_switchEthereumChain'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">chainId</span><span class="token operator">:</span> <span class="token string">'0xf00'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>switchError<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// This error code indicates that the chain has not been added to Bitkeep.</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>switchError<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">4902</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">await</span> ethereum<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'wallet_addEthereumChain'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">chainId</span><span class="token operator">:</span> <span class="token string">'0xf00'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">chainName</span><span class="token operator">:</span> <span class="token string">'...'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">rpcUrls</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'https://...'</span><span class="token punctuation">]</span> <span class="token comment">/* ... */</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>addError<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// handle &quot;add&quot; error</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// handle other &quot;switch&quot; errors</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div></li> <li><p><strong>wallet_switchEthereumChain</strong></p> <p>Creates a confirmation asking the user to switch to the chain with the specified chainId.</p> <p><strong>Parameters:</strong></p> <p>For the rpcUrls and blockExplorerUrls arrays, at least one element is required, and only the first element will be used.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">interface</span> <span class="token class-name">SwitchEthereumChainParameter</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">chainId</span><span class="token operator">:</span> string<span class="token punctuation">;</span> <span class="token comment">// A 0x-prefixed hexadecimal string</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>Returns</strong></p> <p>null - The method returns null if the request was successful, and an error otherwise.</p> <p>If the error code (<code>error.code</code>) is <code>4902</code>, then the requested chain has not been added by BitKeep, and you have to request to add it via <code>wallet_addEthereumChain</code>.</p> <p><strong>Description</strong></p> <p>As with any method that causes a confirmation to appear, <code>wallet_switchEthereumChain</code> should only be called as a result of direct user action, such as the click of a button.</p> <p>Bitkeep will automatically reject the request under the following circumstances:</p> <ul><li>If the chain ID is malformed</li> <li>If the chain with the specified chain ID has not been added to BitKeep</li></ul></li></ul> <h3 id="sendtransaction-transfer"><a href="#sendtransaction-transfer" class="header-anchor">#</a> sendTransaction(Transfer)</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> Provider <span class="token operator">=</span> <span class="token function">getProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> transactionParameters <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">nonce</span><span class="token operator">:</span> <span class="token string">'0x00'</span><span class="token punctuation">,</span> <span class="token comment">// ignored by Bitkeep</span>
  <span class="token literal-property property">gasPrice</span><span class="token operator">:</span> <span class="token string">'0x09184e72a000'</span><span class="token punctuation">,</span> <span class="token comment">// customizable by user during Bitkeep confirmation.</span>
  <span class="token literal-property property">gas</span><span class="token operator">:</span> <span class="token string">'0x2710'</span><span class="token punctuation">,</span> <span class="token comment">// customizable by user during Bitkeep confirmation.</span>
  <span class="token literal-property property">to</span><span class="token operator">:</span> <span class="token string">'0x0000000000000000000000000000000000000000'</span><span class="token punctuation">,</span> <span class="token comment">// Required except during contract publications.</span>
  <span class="token literal-property property">from</span><span class="token operator">:</span> Provider<span class="token punctuation">.</span>selectedAddress<span class="token punctuation">,</span> <span class="token comment">// must match user's active address.</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'0x00'</span><span class="token punctuation">,</span> <span class="token comment">// Only required to send ether to the recipient from the initiating external account.</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span>
    <span class="token string">'0x7f7465737432000000000000000000000000000000000000000000000000000000600057'</span><span class="token punctuation">,</span> <span class="token comment">// Optional, but used for defining smart contract creation and interaction.</span>
  <span class="token literal-property property">chainId</span><span class="token operator">:</span> <span class="token string">'0x3'</span><span class="token punctuation">,</span> <span class="token comment">// Used to prevent transaction reuse across blockchains. Auto-filled by Bitkeep.</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// txHash is a hex string</span>
<span class="token comment">// As with any RPC call, it may throw an error</span>
<span class="token keyword">const</span> txHash <span class="token operator">=</span> <span class="token keyword">await</span> Provider<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'eth_sendTransaction'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">[</span>transactionParameters<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// if used web3</span>
<span class="token keyword">const</span> accounts <span class="token operator">=</span> <span class="token keyword">await</span> Provider<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'eth_requestAccounts'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> web3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Web3</span><span class="token punctuation">(</span>Provider<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> web3<span class="token punctuation">.</span>eth<span class="token punctuation">.</span><span class="token function">sendTransaction</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">from</span><span class="token operator">:</span> Provider<span class="token punctuation">.</span>selectedAddress<span class="token punctuation">,</span>
  <span class="token literal-property property">to</span><span class="token operator">:</span> <span class="token string">'0x0000000000000000000000000000000000000000'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> web3<span class="token punctuation">.</span>utils<span class="token punctuation">.</span><span class="token function">toWei</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'ether'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h2 id="ethereum-json-rpc-methods"><a href="#ethereum-json-rpc-methods" class="header-anchor">#</a> Ethereum JSON-RPC Methods</h2> <p>For the Ethereum JSON-RPC API, please see the <a href="https://ethereum.org/en/developers/docs/apis/json-rpc/#json-rpc-methods" target="_blank" rel="noopener noreferrer">Ethereum wiki<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.
How to use reference to  <a href="https://metamask.github.io/api-playground/api-documentation" target="_blank" rel="noopener noreferrer">API Playground<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <ul><li><a href="https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_accounts" target="_blank" rel="noopener noreferrer">eth_accounts<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_accounts" target="_blank" rel="noopener noreferrer">eth_call<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_getbalance" target="_blank" rel="noopener noreferrer">eth_getBalance<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_sendtransaction" target="_blank" rel="noopener noreferrer">eth_sendTransaction<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_sign" target="_blank" rel="noopener noreferrer">eth_sign<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code>
  <span class="token keyword">const</span> Provider <span class="token operator">=</span> <span class="token function">getProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> Provider<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>method<span class="token operator">:</span><span class="token string">&quot;eth_accounts&quot;</span><span class="token punctuation">,</span> params<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">await</span> Provider<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>method<span class="token operator">:</span><span class="token string">&quot;eth_getBalance&quot;</span><span class="token punctuation">,</span> params<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="event-listeners"><a href="#event-listeners" class="header-anchor">#</a> Event listeners</h2> <p>Notify when address and network changed . used <a href="https://www.npmjs.com/package/eventemitter3" target="_blank" rel="noopener noreferrer">eventemitter3<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> Provider <span class="token operator">=</span> <span class="token function">getProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// reomove all listeners</span>
Provider<span class="token punctuation">.</span><span class="token function">removeAllListeners</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">handleAccountsChainChanged</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  Provider<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'accountsChanged'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>address<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Handle the new accounts, or lack thereof.</span>
    <span class="token comment">// &quot;accounts&quot; will always be an array, but it can be empty.</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'address changed'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Provider<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'chainChanged'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">chainId</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Handle the new chain.</span>
    <span class="token comment">// Correctly handling chain changes can be complicated.</span>
    <span class="token comment">// We recommend reloading the page unless you have good reason not to.</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'chainid changed'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>Also, don't forget to remove listeners once you are done listening to them (for example on component unmount in React).
Prevent multiple listening, and clear it before listening <code>removeAllListeners</code>.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> Provider <span class="token operator">=</span> <span class="token function">getProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">handleAccountsChanged</span><span class="token punctuation">(</span><span class="token parameter">accounts</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
Provider<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'accountsChanged'</span><span class="token punctuation">,</span> handleAccountsChanged<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//remove</span>
Provider<span class="token punctuation">.</span><span class="token function">removeAllListeners</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//remove all</span>
Provider<span class="token punctuation">.</span><span class="token function">removeListener</span><span class="token punctuation">(</span><span class="token string">'accountsChanged'</span><span class="token punctuation">,</span> handleAccountsChanged<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// only remove accountsChanged</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>accountsChanged</strong></p> <p>The BitKeep provider emits this event whenever the return value of the eth_accounts RPC method changes. eth_accounts returns an array that is either empty or contains a single account address. The returned address, if any, is the address of the most recently used account that the caller is permitted to access. Callers are identified by their URL origin, which means that all sites with the same origin share the same permissions.</p> <p>This means that accountsChanged will be emitted whenever the user's exposed account address changes.</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code>  <span class="token keyword">const</span> Provider <span class="token operator">=</span> <span class="token function">getProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Provider<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'accountsChanged'</span><span class="token punctuation">,</span> <span class="token function-variable function">handler</span><span class="token operator">:</span> <span class="token punctuation">(</span>accounts<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>chainChanged</strong>
The BitKeep provider emits this event when the currently connected chain changes.</p> <p>All RPC requests are submitted to the currently connected chain. Therefore, it's critical to keep track of the current chain ID by listening for this event.</p> <p>We strongly recommend reloading the page on chain changes, unless you have good reason not to.</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code>  <span class="token keyword">const</span> Provider <span class="token operator">=</span> <span class="token function">getProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Provider<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'accountsChanged'</span><span class="token punctuation">,</span> <span class="token function-variable function">handler</span><span class="token operator">:</span> <span class="token punctuation">(</span>accounts<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="signing-data"><a href="#signing-data" class="header-anchor">#</a> Signing Data</h2> <ul><li><code>eth_sign</code></li> <li><code>personal_sign</code></li> <li><code>eth_signTypedData</code></li> <li><code>eth_signTypedData_v3</code></li> <li><code>eth_signTypedData_v4</code></li></ul> <p>You can refer to  docs</p> <ul><li><a href="https://docs.metamask.io/guide/signing-data.html#signing-data-with-metamask" target="_blank" rel="noopener noreferrer">signing-data-with-metamask<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/MetaMask/eth-sig-util" target="_blank" rel="noopener noreferrer">eth-sig-util<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li> <li><a href="https://github.com/bitkeepwallet/example/tree/master/evm-dapp-demo/test-dapp" target="_blank" rel="noopener noreferrer">demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="errors"><a href="#errors" class="header-anchor">#</a> Errors</h2> <p>All errors thrown or returned by the MetaMask provider follow this interface:</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">ProviderRpcError</span> <span class="token keyword">extends</span> <span class="token class-name">Error</span> <span class="token punctuation">{</span>
  message<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  code<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  data<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>The ethereum.request(args) method throws errors eagerly. You can often use the error code property to determine why the request failed. Common codes and their meaning include:</p> <ul><li><code>4001</code> <ul><li>The request was rejected by the user</li></ul></li> <li><code>-32603</code> <ul><li>Internal error or The parameters were invalid</li></ul></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/bitkeepwallet/docs/edit/main/docs/guide/wallet/ethereum.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">10/12/2022, 11:31:51 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/wallet/quickly.html" class="prev">
        Quickly support BitKeep Wallet
      </a></span> <span class="next"><a href="/guide/wallet/solana.html">
        Solana
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.0084aa93.js" defer></script><script src="/assets/js/4.47bce87d.js" defer></script><script src="/assets/js/21.10103ffd.js" defer></script><script src="/assets/js/5.63a550d4.js" defer></script>
  </body>
</html>
